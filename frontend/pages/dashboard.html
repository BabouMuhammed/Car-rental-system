<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Car Rental Dashboard</title>
    <link rel="stylesheet" href="dashboard.css">
    <link rel="stylesheet" href="../style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="../js/api.js" defer></script>
    <script src="../js/main.js" defer></script>
    <script src="../js/auth.js" defer></script>
    <script src="../js/dashboard.js" defer></script>
</head>
<body class="dashboard-body">

<div class="dashboard-container">
    <header class="header">
        <div class="intro">
            <h2><span>Rent</span>ify</h2>
            <nav class="nav-links" id="navLinks">
                <a class="active" data-tab="dashboard" href="#dashboard">Dashboard</a>
                <a data-tab="cars" href="#cars">Manage Cars</a>
                <a data-tab="bookings" href="#bookings">Bookings</a>
                <a data-tab="customers" href="#customers">Customers</a>
                <a href="../index.html">Home</a>
            </nav>
            <div class="btn-group">
                <span class="admin-info" style="color: white; margin-right: 15px;"><span class="user-icon">ðŸ‘¤</span> <span id="userRoleName">Admin</span></span>
                <button class="btn logout-btn" id="logoutBtn">Logout</button>
            </div>
        </div>
    </header>

    <div class="dashboard-hero">
        <div class="hero-content">
            <h1 id="welcomeText">Dashboard Overview</h1>
            <p>Manage your fleet, bookings, and customers in one place.</p>
        </div>
    </div>

    <main class="dashboard">
        <!-- DASHBOARD TAB -->
    <div class="tab-content" id="dashboard-tab">
        <section class="stats">
            <div class="stat-card">
                <div class="stat-icon" aria-hidden="true">
                    <svg class="ui-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M3 13l2-6a2 2 0 0 1 1.9-1.4h10.2A2 2 0 0 1 19 7l2 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <path d="M5 13h14v5a2 2 0 0 1-2 2h-1" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <path d="M5 20H4a2 2 0 0 1-2-2v-5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <path d="M7 20a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" stroke="currentColor" stroke-width="2"/>
                        <path d="M17 20a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" stroke="currentColor" stroke-width="2"/>
                    </svg>
                </div>
                <h3>Available Cars</h3>
                <p class="stat-number">â€”</p>
            </div>
            <div class="stat-card">
                <div class="stat-icon" aria-hidden="true">
                    <svg class="ui-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M7 2v3M17 2v3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <path d="M3 9h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <path d="M5 5h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2Z" stroke="currentColor" stroke-width="2"/>
                    </svg>
                </div>
                <h3>Total Bookings</h3>
                <p class="stat-number">â€”</p>
            </div>
            <div class="stat-card">
                <div class="stat-icon" aria-hidden="true">
                    <svg class="ui-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 8v5l3 2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" stroke="currentColor" stroke-width="2"/>
                    </svg>
                </div>
                <h3>Ongoing Rentals</h3>
                <p class="stat-number">â€”</p>
            </div>
            <div class="stat-card">
                <div class="stat-icon" aria-hidden="true">
                    <svg class="ui-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M16 11a4 4 0 1 0-8 0 4 4 0 0 0 8 0Z" stroke="currentColor" stroke-width="2"/>
                        <path d="M4 22c0-4.418 3.582-8 8-8s8 3.582 8 8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </div>
                <h3>Total Customers</h3>
                <p class="stat-number">â€”</p>
            </div>
        </section>

        <section class="middle">
            <div class="panel">
                <h3>Bookings Overview</h3>
                <div class="chart-placeholder">
                    <canvas id="bookingChart"></canvas>
                    <p style="color: #666; margin-top: 20px;">
                        <span class="inline-icon" aria-hidden="true">
                            <svg class="ui-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M4 19V5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                <path d="M4 19h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                <path d="M7 14l3-3 3 2 4-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </span>
                        Monthly booking trends
                    </p>
                </div>
            </div>

            <div class="panel">
                <h3>Rental Status</h3>
                <ul class="status-list">
                    <li><span class="status-dot ongoing"></span>Accepted <span class="count" data-status="ACCEPTED">â€”</span></li>
                    <li><span class="status-dot upcoming"></span>Pending <span class="count" data-status="PENDING">â€”</span></li>
                    <li><span class="status-dot cancelled"></span>Rejected <span class="count danger" data-status="REJECTED">â€”</span></li>
                </ul>
            </div>
        </section>

        <section class="panel full-width">
            <div class="section-header">
                <h3>Latest Bookings</h3>
                <a href="#bookings" class="view-all">View All â†’</a>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>Customer</th>
                        <th>Car</th>
                        <th>Period</th>
                        <th>Total Price</th>
                        <th>Status</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Loaded dynamically from backend -->
                </tbody>
            </table>
        </section>
    </div>

    <!-- MANAGE CARS TAB -->
    <div class="tab-content hidden" id="cars-tab">
        <section class="panel full-width">
            <div class="section-header">
                <h3>Manage Fleet</h3>
                <button class="add-btn">+ Add New Car</button>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>Car</th>
                        <th>Fuel</th>
                        <th>Seats</th>
                        <th>Daily Rate</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Loaded dynamically from backend -->
                </tbody>
            </table>
        </section>
    </div>

    <!-- BOOKINGS TAB -->
    <div class="tab-content hidden" id="bookings-tab">
        <section class="filters">
            <input type="text" placeholder="Search by customer name..." class="search-input">
            <select class="filter-select">
                <option value="">All Statuses</option>
                <option value="ongoing">Ongoing</option>
                <option value="upcoming">Upcoming</option>
                <option value="completed">Completed</option>
                <option value="cancelled">Cancelled</option>
            </select>
            <button class="filter-btn" type="button">
                <span class="inline-icon" aria-hidden="true">
                    <svg class="ui-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z" stroke="currentColor" stroke-width="2"/>
                        <path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </span>
                Filter
            </button>
        </section>

        <section class="panel full-width">
            <div class="section-header">
                <h3>All Bookings</h3>
                <span class="booking-count">Total: â€”</span>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>Booking ID</th>
                        <th>Customer</th>
                        <th>Car</th>
                        <th>Start Date</th>
                        <th>End Date</th>
                        <th>Total Days</th>
                        <th>Amount</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Loaded dynamically from backend -->
                </tbody>
            </table>
        </section>
    </div>

    <!-- CUSTOMERS TAB -->
    <div class="tab-content hidden" id="customers-tab">
        <section class="filters">
            <input type="text" placeholder="Search customers..." class="search-input">
            <button class="filter-btn" type="button">
                <span class="inline-icon" aria-hidden="true">
                    <svg class="ui-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z" stroke="currentColor" stroke-width="2"/>
                        <path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </span>
                Search
            </button>
        </section>

        <section class="panel full-width">
            <div class="section-header">
                <h3>Customer Directory</h3>
                <span class="customer-count">Total: â€”</span>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>Customer ID</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Phone</th>
                        <th>Role</th>
                        <th>Member Since</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Loaded dynamically from backend -->
                </tbody>
            </table>
        </section>
    </div>

</main>

<!-- Add / Edit Car Modal -->
<div class="modal hidden" id="car-modal" aria-hidden="true">
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="car-modal-title">Add New Car</h3>
            <button class="modal-close" id="car-modal-close" type="button">Ã—</button>
        </div>
        <form id="car-form" class="modal-form">
            <input type="hidden" id="car-id" value="">

            <div class="form-row">
                <label>Brand</label>
                <input id="car-brand" type="text" placeholder="e.g. Mercedes" required>
            </div>
            <div class="form-row">
                <label>Model</label>
                <input id="car-model" type="text" placeholder="e.g. C-Class" required>
            </div>
            <div class="form-row">
                <label>Price per day</label>
                <input id="car-price" type="number" min="0" step="1" placeholder="e.g. 150" required>
            </div>
            <div class="form-row">
                <label>Fuel type</label>
                <select id="car-fuel" required>
                    <option value="">Selectâ€¦</option>
                    <option value="DIESEL">DIESEL</option>
                    <option value="GASOIL">GASOIL</option>
                </select>
            </div>
            <div class="form-row">
                <label>Status</label>
                <select id="car-status" required>
                    <option value="">Selectâ€¦</option>
                    <option value="AVAILABLE">AVAILABLE</option>
                    <option value="NOT_AVAILABLE">NOT_AVAILABLE</option>
                </select>
            </div>
            <div class="form-row">
                <label>Seating capacity</label>
                <input id="car-seats" type="number" min="1" step="1" placeholder="e.g. 5" required>
            </div>
            <div class="form-row" id="car-image-row">
                <label>Image</label>
                <input id="car-image" type="file" accept="image/*" required>
            </div>

            <div class="form-actions">
                <button type="button" class="btn-secondary" id="car-cancel-btn">Cancel</button>
                <button type="submit" class="btn-primary" id="car-submit-btn">Save</button>
            </div>
            <p class="form-error hidden" id="car-form-error"></p>
        </form>
    </div>
</div>

</body>

</html>
